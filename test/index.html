<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>爆分攻略落地頁</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background:#000; color:#fff; min-height:100vh;
      padding-bottom:120px;
      font-family:-apple-system, BlinkMacSystemFont,"SF Pro Text","Segoe UI",system-ui,sans-serif;
      display:flex; justify-content:center;
    }

    /* 整體寬度限制 750 */
    .page {
      width:100%;
      max-width:750px;
      margin:0 auto;
    }

    /* 固定 750x344 輪播框 */
    .carousel-wrapper {
      width:750px;
      height:344px;
      margin:0 auto 10px auto;
      position:relative;
      overflow:hidden;
      border-radius:12px;
      background:#000;
    }
    .carousel-inner {
      display:flex;
      width:100%;
      height:100%;
      transition:transform 0.4s ease;
    }
    .carousel-slide {
      width:750px;
      height:344px;
      flex-shrink:0;
    }
    .carousel-slide img {
      width:750px;
      height:344px;
      display:block;
      object-fit:cover;
    }

    .carousel-dots {
      position:absolute;
      left:50%; bottom:8px;
      transform:translateX(-50%);
      display:flex; gap:6px;
      z-index:10;
    }
    .carousel-dot {
      width:8px; height:8px;
      border-radius:50%;
      background:rgba(255,255,255,0.4);
    }
    .carousel-dot.active { background:#fff; }

    /* 背景圖寬度固定 750，高度自動 */
    .main-bg {
      width:750px;
      height:auto;
      display:block;
      margin:0 auto;
    }

    /* 底部固定按鈕 */
    .fixed-btn {
      position:fixed; left:50%; bottom:16px;
      transform:translateX(-50%);
      z-index:9999; text-decoration:none;
      animation:breathing 2.5s ease-in-out infinite;
      transition:transform 0.15s ease, filter 0.15s ease;
    }
    .fixed-btn img {
      width:90vw; max-width:360px; display:block;
    }
    @keyframes breathing {
      0%{transform:translateX(-50%) scale(1);}
      50%{transform:translateX(-50%) scale(1.08);}
      100%{transform:translateX(-50%) scale(1);}
    }
    .fixed-btn:active {
      transform:translateX(-50%) scale(0.92);
      filter:brightness(1.2);
      animation:none;
    }
  </style>
</head>
<body>
  <div class="page">
    <div id="banner-carousel" class="carousel-wrapper">
      <div id="carousel-inner" class="carousel-inner"></div>
      <div id="carousel-dots" class="carousel-dots"></div>
    </div>

    <img src="img/bg.png" class="main-bg">
  </div>

  <a href="https://fbads88.gm89.net/login?id=register" class="fixed-btn">
    <img src="img/button.png">
  </a>

  <script>
    (function(){
      const URL = "https://fbads88.gm89.net/login?id=register";
      const MAX = 20;
      const PREFIX = "bn/";
      const inner = document.getElementById("carousel-inner");
      const dots = document.getElementById("carousel-dots");
      const wrap = document.getElementById("banner-carousel");

      let imgs = [];
      let pending = 0;
      let index = 0;
      let timer = null;
      let startX = null;
      let swipe = false;

      function load(){
        for(let i=1;i<=MAX;i++){
          const n = String(i).padStart(3,"0");
          const src = PREFIX+n+".png";
          pending++;
          const im = new Image();
          im.onload = ()=>{ imgs.push(src); check(); };
          im.onerror = ()=>{ check(); };
          im.src = src;
        }
      }

      function check(){
        pending--;
        if(pending===0){
          if(imgs.length===0){ wrap.style.display="none"; }
          else init();
        }
      }

      function init(){
        imgs.forEach((src,i)=>{
          const slide = document.createElement("div");
          slide.className="carousel-slide";
          const im = document.createElement("img");
          im.src = src;
          slide.appendChild(im);
          inner.appendChild(slide);

          const d = document.createElement("div");
          d.className="carousel-dot"+(i===0?" active":"");
          dots.appendChild(d);
        });

        wrap.addEventListener("click", ()=>{ if(!swipe) location.href=URL; });

        wrap.addEventListener("touchstart", e=>{
          startX = e.touches[0].clientX;
          swipe = false;
        });
        wrap.addEventListener("touchmove", e=>{
          const dx = e.touches[0].clientX - startX;
          if(Math.abs(dx)>10) swipe = true;
        });
        wrap.addEventListener("touchend", e=>{
          const dx = e.changedTouches[0].clientX - startX;
          if(swipe && Math.abs(dx)>40){
            if(dx<0) next();
            else prev();
          }
          restart();
        });

        start();
      }

      function update(){
        inner.style.transform = "translateX(" + (-index*750) + "px)";
        [...dots.children].forEach((d,i)=>d.classList.toggle("active", i===index));
      }

      function next(){ index=(index+1)%imgs.length; update(); }
      function prev(){ index=(index-1+imgs.length)%imgs.length; update(); }

      function start(){ timer=setInterval(next,3000); }
      function restart(){ clearInterval(timer); start(); }

      load();
    })();
  </script>
</body>
</html>
